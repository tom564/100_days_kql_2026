day: 8
operator: join
category: tabular
description: Merges rows from two tables
explanation: |
  join combines rows from two tables based on matching values in specified columns. There are multiple join types (kinds): inner, leftouter, rightouter, fullouter, leftanti, rightanti, leftsemi, and rightsemi.
  The default join kind is innerunique. Use the 'on' clause to specify the columns to match. Join is essential for correlating data across different tables.
examples:
  - query: | 
      SecurityEvent
      | where EventID == 4624
      | join kind=leftouter (
          SecurityEvent
          | where EventID == 4634
      ) on $left.LogonId == $right.LogonId
    description: >
      Left outer join successful logons with logoffs by LogonId.
  - query: | 
      DeviceProcessEvents
      | summarize ProcessCount = count() by DeviceName
      | join kind=inner (
          DeviceInfo
          | project DeviceName, OSPlatform
      ) on DeviceName
    description: >
      Joins aggregated process counts with device information.

challenge: |
  Using the DeviceProcessEvents and DeviceInfo sample dataset answer the following question:

  Join the DeviceProcessEvents table where ReportId == "1072407" onto DemoDeviceInfo table on DeviceId, and return the OSDistribution. 

  ```
  // DemoDeviceInfo
  // ----------------------------
  let DemoDeviceInfo = externaldata(
      AdditionalFields:dynamic,
      ClientVersion:string,
      DeviceId:string,
      DeviceName:string,
      DeviceObjectId:string,
      IsAzureADJoined:bool,
      LoggedOnUsers:dynamic,
      MachineGroup:string,
      OSArchitecture:string,
      OSBuild:long,
      OSPlatform:string,
      OSVersion:string,
      RegistryDeviceTag:string,
      ReportId:long,
      TimeGenerated:datetime,
      Timestamp:datetime,
      AadDeviceId:string,
      DeviceCategory:string,
      DeviceSubtype:string,
      DeviceType:string,
      JoinType:string,
      MergedDeviceIds:string,
      MergedToDeviceId:string,
      Model:string,
      OnboardingStatus:string,
      OSDistribution:string,
      OSVersionInfo:string,
      Vendor:string,
      SensorHealthState:string,
      IsExcluded:bool,
      ExclusionReason:string,
      AssetValue:string,
      ExposureLevel:string,
      IsInternetFacing:bool,
      DeviceManualTags:string,
      DeviceDynamicTags:string,
      AwsResourceName:string,
      GcpFullResourceName:string,
      CloudPlatforms:string,
      HardwareUuid:string,
      HostDeviceId:string,
      IsTransient:bool,
      MitigationStatus:string,
      OsBuildRevision:string,
      RestrictedDeviceSecurityOperations:string,
      SourceSystem:string,
      Type:string
  )
  ["https://raw.githubusercontent.com/tom564/100_days_kql_2026/refs/heads/main/Datasets/DemoDeviceInfo.csv.gz"]
  with(format="csv", ignoreFirstRecord=true);
      // ----------------------------
    // DemoDeviceProcessEvents
    // ----------------------------
    let DemoDeviceProcessEvents = externaldata(
        AccountDomain:string,
        AccountName:string,
        AccountObjectId:string,
        AccountSid:string,
        AccountUpn:string,
        ActionType:string,
        AdditionalFields:dynamic,
        AppGuardContainerId:string,
        DeviceId:string,
        DeviceName:string,
        FileName:string,
        FolderPath:string,
        FileSize:long,
        InitiatingProcessAccountDomain:string,
        InitiatingProcessAccountName:string,
        InitiatingProcessAccountObjectId:string,
        InitiatingProcessAccountSid:string,
        InitiatingProcessAccountUpn:string,
        InitiatingProcessCommandLine:string,
        InitiatingProcessFileName:string,
        InitiatingProcessFolderPath:string,
        InitiatingProcessId:long,
        InitiatingProcessIntegrityLevel:string,
        InitiatingProcessLogonId:long,
        InitiatingProcessMD5:string,
        InitiatingProcessParentFileName:string,
        InitiatingProcessParentId:long,
        InitiatingProcessSHA1:string,
        InitiatingProcessSHA256:string,
        InitiatingProcessTokenElevation:string,
        InitiatingProcessFileSize:long,
        InitiatingProcessVersionInfoCompanyName:string,
        InitiatingProcessVersionInfoProductName:string,
        InitiatingProcessVersionInfoProductVersion:string,
        InitiatingProcessVersionInfoInternalFileName:string,
        InitiatingProcessVersionInfoOriginalFileName:string,
        InitiatingProcessVersionInfoFileDescription:string,
        LogonId:long,
        MD5:string,
        MachineGroup:string,
        ProcessCommandLine:string,
        ProcessCreationTime:datetime,
        ProcessId:long,
        ProcessIntegrityLevel:string,
        ProcessTokenElevation:string,
        ProcessVersionInfoCompanyName:string,
        ProcessVersionInfoProductName:string,
        ProcessVersionInfoProductVersion:string,
        ProcessVersionInfoInternalFileName:string,
        ProcessVersionInfoOriginalFileName:string,
        ProcessVersionInfoFileDescription:string,
        InitiatingProcessSignerType:string,
        InitiatingProcessSignatureStatus:string,
        ReportId:long,
        SHA1:string,
        SHA256:string,
        TimeGenerated:datetime,
        Timestamp:datetime,
        InitiatingProcessParentCreationTime:datetime,
        InitiatingProcessCreationTime:datetime,
        CreatedProcessSessionId:long,
        IsProcessRemoteSession:bool,
        ProcessRemoteSessionDeviceName:string,
        ProcessRemoteSessionIP:string,
        InitiatingProcessSessionId:long,
        IsInitiatingProcessRemoteSession:bool,
        InitiatingProcessRemoteSessionDeviceName:string,
        InitiatingProcessRemoteSessionIP:string,
        InitiatingProcessUniqueId:string,
        ProcessUniqueId:string,
        SourceSystem:string,
        Type:string
    )
    ["https://raw.githubusercontent.com/tom564/100_days_kql_2026/refs/heads/main/Datasets/DemoDeviceProcessEvents.csv.gz"]
    with(format="csv", ignoreFirstRecord=true);
    DemoDeviceProcessEvents
  ```

answer: |
  // Run this KQL replacing <Your Answer Here> with your answer to validate, 
  let answer = "<Your Answer Here>";
  let repo = "tom564";
  let answer_hash = "f8be3b7af8e4ec33c01c3b15896d89c1cbb83b5c398e5c7d2ed9adb3a88dbbd3";
  let attempt = hash_sha256(strcat(answer, repo));
  print iff(attempt == answer_hash, "Correct", "Incorrect")